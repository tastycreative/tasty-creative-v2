generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                         String                        @id @default(cuid())
  email                      String                        @unique
  emailVerified              DateTime?
  name                       String?
  image                      String?
  role                       Role                          @default(GUEST)
  createdAt                  DateTime                      @default(now())
  updatedAt                  DateTime                      @updatedAt
  password                   String?
  lastAccessedAt             DateTime?                     @default(now())
  username                   String?                       @unique
  accounts                   Account[]
  assignedBoardColumnsByUser BoardColumnMemberAssignment[] @relation("BoardColumnAssignedBy")
  assignedBoardColumns       BoardColumnMemberAssignment[] @relation("BoardColumnAssignedUser")
  chatbotConversations       ChatbotConversation[]
  ContentEvent               ContentEvent[]
  ContentSubmission          ContentSubmission[]
  contentTypePricingHistory  ContentTypePricingHistory[]   @relation("ContentTypePricingHistoryChangedBy")
  forumComments              ForumComment[]
  forumVotes                 ForumVote[]
  instagramPosts             InstagramPost[]
  liveFlyerGalleries         LiveFlyerGallery[]
  ModerationLog              ModerationLog[]
  ModularWorkflow            ModularWorkflow[]             @relation("ModularWorkflowCreator")
  notifications              Notification[]
  oftvGalleryFolderFavorites OFTVGalleryFolderFavorite[]
  oftvThumbnailEditorTasks   OFTVTask[]                    @relation("OFTVThumbnailEditor")
  oftvVideoEditorTasks       OFTVTask[]                    @relation("OFTVVideoEditor")
  pageViews                  PageView[]
  createdPodTeams            PodTeam[]                     @relation("PodTeamCreator")
  podClientAssignments       PodTeamClientAssignment[]     @relation("PodClientAssignedBy")
  podTeamMemberships         PodTeamMember[]               @relation("PodTeamMemberUser")
  Post                       Post[]
  PostReaction               PostReaction[]
  sessions                   Session[]
  issuedStrikes              Strike[]                      @relation("StrikeIssuedBy")
  strikes                    Strike[]                      @relation("StrikeUser")
  createdTasks               Task[]                        @relation("TaskCreator")
  taskActivities             TaskActivityHistory[]         @relation("TaskActivityUser")
  taskComments               TaskComment[]                 @relation("TaskCommentUser")
  Thread                     Thread[]
  ThreadWatcher              ThreadWatcher[]
  performedUserActivities    UserActivityHistory[]         @relation("UserActivityActor")
  receivedUserActivities     UserActivityHistory[]         @relation("UserActivityTarget")
  verificationTokens         VerificationToken[]
  voiceNoteHistory           VoiceNoteHistory[]
  voiceNoteSales             VoiceNoteSale[]
}

model Account {
  id                String    @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  last_accessed     DateTime? @db.Timestamptz(6)
  last_refreshed    DateTime? @db.Timestamptz(6)
  user              User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime
  id         String   @id @default(cuid())
  userId     String?
  user       User?    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([identifier, token])
}

model HubstaffConfig {
  id           String    @id @default(cuid())
  refreshToken String
  accessToken  String?
  expiresAt    DateTime?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt

  @@index([id])
}

model PageView {
  id              String   @id @default(cuid())
  sessionId       String
  userId          String?
  ipHash          String
  userAgent       String?
  path            String
  referrer        String?
  timestamp       DateTime @default(now())
  sessionDuration Int?
  user            User?    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([sessionId])
  @@index([userId])
  @@index([timestamp])
  @@index([path])
}

model Analytics {
  id                 String   @id @default(cuid())
  date               DateTime @unique
  uniqueVisitors     Int      @default(0)
  totalPageViews     Int      @default(0)
  authenticatedViews Int      @default(0)
  anonymousViews     Int      @default(0)
  createdAt          DateTime @default(now())

  @@index([date])
}

model VoiceGenAccount {
  id          String      @id @default(cuid())
  clientName  String
  email       String?
  password    String?
  voiceStatus VoiceStatus @default(NA)
  accountType AccountType @default(ELEVENLABS)
  dataFolder  String?
  feedback    String?
  rating      String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt

  @@index([clientName])
  @@index([voiceStatus])
  @@index([accountType])
}

model VoiceModel {
  id          String             @id @default(cuid())
  accountKey  String             @unique
  accountName String
  voiceName   String
  voiceId     String             @unique
  apiKey      String
  description String?            @default("Backup account for high-volume usage")
  category    VoiceModelCategory @default(PROFESSIONAL)
  isActive    Boolean            @default(true)
  createdAt   DateTime           @default(now())
  updatedAt   DateTime           @updatedAt

  @@index([accountKey])
  @@index([voiceId])
  @@index([category])
  @@index([isActive])
  @@index([createdAt])
}

model VoiceNoteHistory {
  id                  String         @id @default(cuid())
  userId              String
  elevenLabsHistoryId String
  voiceId             String
  voiceName           String
  accountKey          String
  text                String
  generatedAt         DateTime
  createdAt           DateTime       @default(now())
  charactersUsed      Int?
  user                User           @relation(fields: [userId], references: [id], onDelete: Cascade)
  voiceNoteSale       VoiceNoteSale?

  @@unique([userId, elevenLabsHistoryId])
  @@index([userId])
  @@index([elevenLabsHistoryId])
  @@index([voiceId])
  @@index([accountKey])
  @@index([generatedAt])
  @@index([createdAt])
}

model VoiceNoteSale {
  id                 String            @id @default(cuid())
  userId             String
  userName           String
  userEmail          String
  modelName          String
  voiceNote          String
  saleAmount         Float
  soldDate           DateTime
  status             String            @default("Completed")
  generatedDate      DateTime?
  source             String?           @default("Manual")
  voiceNoteHistoryId String?           @unique
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  user               User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  voiceNoteHistory   VoiceNoteHistory? @relation(fields: [voiceNoteHistoryId], references: [id])

  @@index([userId])
  @@index([modelName])
  @@index([soldDate])
  @@index([status])
  @@index([createdAt])
  @@index([saleAmount])
}

model Task {
  id                  String                @id @default(cuid())
  title               String
  description         String?
  priority            TaskPriority          @default(MEDIUM)
  dueDate             DateTime?
  assignedTo          String?
  createdById         String
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
  updatedBy           String?
  attachments         Json?
  assignedToTeam      Boolean               @default(false)
  contentSubmissionId String?               @unique
  status              String                @default("NOT_STARTED")
  podTeamId           String?
  taskNumber          Int                   @default(autoincrement())
  ContentEvent        ContentEvent?
  ModularWorkflow     ModularWorkflow?      @relation("ModularWorkflowTask")
  notifications       Notification[]
  oftvTask            OFTVTask?
  ContentSubmission   ContentSubmission?    @relation(fields: [contentSubmissionId], references: [id])
  createdBy           User                  @relation("TaskCreator", fields: [createdById], references: [id])
  podTeam             PodTeam?              @relation(fields: [podTeamId], references: [id])
  activityHistory     TaskActivityHistory[]
  comments            TaskComment[]
  wallPostSubmission  WallPostSubmission?

  @@index([podTeamId])
  @@index([createdById])
  @@index([status])
  @@index([assignedToTeam])
  @@index([contentSubmissionId])
  @@index([taskNumber])
}

model OFTVTask {
  id                    String         @id @default(cuid())
  taskId                String         @unique
  model                 String
  folderLink            String?
  specialInstructions   String?
  dateAssigned          DateTime       @default(now())
  dateCompleted         DateTime?
  createdAt             DateTime       @default(now())
  updatedAt             DateTime       @updatedAt
  videoEditorStatus     OFTVTaskStatus @default(NOT_STARTED)
  thumbnailEditorStatus OFTVTaskStatus @default(NOT_STARTED)
  thumbnailEditorUserId String?
  videoEditorUserId     String?
  videoDescription      String?
  attachments           Json?
  task                  Task           @relation(fields: [taskId], references: [id], onDelete: Cascade)
  thumbnailEditorUser   User?          @relation("OFTVThumbnailEditor", fields: [thumbnailEditorUserId], references: [id])
  videoEditorUser       User?          @relation("OFTVVideoEditor", fields: [videoEditorUserId], references: [id])

  @@index([taskId])
  @@index([model])
  @@index([videoEditorUserId])
  @@index([thumbnailEditorUserId])
  @@index([videoEditorStatus])
  @@index([thumbnailEditorStatus])
  @@index([dateAssigned])
}

model TaskActivityHistory {
  id          String           @id @default(cuid())
  taskId      String
  userId      String
  actionType  TaskActivityType
  fieldName   String?
  oldValue    String?
  newValue    String?
  description String?
  createdAt   DateTime         @default(now())
  metadata    Json?
  task        Task             @relation(fields: [taskId], references: [id], onDelete: Cascade)
  user        User             @relation("TaskActivityUser", fields: [userId], references: [id])

  @@index([taskId])
  @@index([userId])
  @@index([createdAt])
  @@index([actionType])
}

model TaskComment {
  id          String   @id @default(cuid())
  taskId      String
  userId      String
  content     String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  attachments Json?
  task        Task     @relation(fields: [taskId], references: [id], onDelete: Cascade)
  user        User     @relation("TaskCommentUser", fields: [userId], references: [id])

  @@index([taskId])
  @@index([userId])
  @@index([createdAt])
}

model ClientModel {
  id                    String                    @id @default(cuid())
  clientName            String                    @unique
  status                String
  percentTaken          String?
  guaranteed            String?
  launchDate            String?
  referrer              String?
  name                  String?
  profilePicture        String?
  personalityType       String?
  commonTerms           String?
  commonEmojis          String?
  restrictedTermsEmojis String?
  notes                 String?
  generalNotes          String?
  mainInstagram         String?
  mainTwitter           String?
  mainTiktok            String?
  profileLink           String?
  createdAt             DateTime                  @default(now())
  updatedAt             DateTime                  @updatedAt
  row_id                String?
  chattingManagers      String[]
  launchesPodFolderId   String?
  sheetLinks            ClientModelSheetLinks[]
  contentDetails        ContentDetails?
  ContentEvent          ContentEvent[]
  ContentTypeOption     ContentTypeOption[]
  liveFlyerGalleries    LiveFlyerGallery[]
  notifications         Notification[]
  oftvGallery           OFTVGallery?
  contentTypeOptions    ContentTypeOption[]       @relation("ClientModelContentTypes")
  podTeamAssignments    PodTeamClientAssignment[]

  @@index([clientName])
  @@index([status])
}

model ClientModelSheetLinks {
  id            String      @id @default(cuid())
  clientModelId String
  sheetUrl      String
  sheetName     String?
  sheetType     String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  folderId      String?
  folderName    String?
  clientModel   ClientModel @relation(fields: [clientModelId], references: [id], onDelete: Cascade)

  @@index([clientModelId])
  @@index([sheetType])
}

model ContentDetails {
  id                         String      @id @default(cuid())
  twitterNudity              String?
  openToLivestreams          String?
  onlyFansWallLimitations    String?
  flyerCensorshipLimitations String?
  boobContent                String?
  pussyContent               String?
  soloSquirtContent          String?
  soloFingerContent          String?
  soloDildoContent           String?
  soloVibratorContent        String?
  joiContent                 String?
  bgContent                  String?
  bjHandjobContent           String?
  bggContent                 String?
  bbgContent                 String?
  orgyContent                String?
  ggContent                  String?
  analContent                String?
  livestreamContent          String?
  customVideoPricing         String?
  customCallPricing          String?
  bundleContent5_10          String?
  bundleContent10_15         String?
  bundleContent15_20         String?
  bundleContent20_25         String?
  bundleContent25_30         String?
  bundleContent30Plus        String?
  contentOptionsForGames     String?
  createdAt                  DateTime    @default(now())
  updatedAt                  DateTime    @updatedAt
  clientModelName            String      @unique
  generalClientNotes         String?
  notes                      String?
  personalityType            String?
  restrictedTerms            String?
  upsell_1                   String?
  upsell_10                  String?
  upsell_11                  String?
  upsell_12                  String?
  upsell_13                  String?
  upsell_14                  String?
  upsell_15                  String?
  upsell_16                  String?
  upsell_17                  String?
  upsell_2                   String?
  upsell_3                   String?
  upsell_4                   String?
  upsell_5                   String?
  upsell_6                   String?
  upsell_7                   String?
  upsell_8                   String?
  upsell_9                   String?
  clientModel                ClientModel @relation(fields: [clientModelName], references: [clientName], onDelete: Cascade)
}

model ClientModelDetails {
  id                    String               @id @default(cuid())
  full_name             String?
  age                   String?
  birthday              String?
  height                String?
  weight                String?
  clothing_size         String?
  ethnicity             String?
  birthplace            String?
  current_city          String?
  timezone              String?
  background            String?
  favorite_colors       String?
  interests             String?
  personality           String?
  amazon_wishlist       String?
  createdAt             DateTime             @default(now())
  updatedAt             DateTime             @updatedAt
  clothing_items        String?
  content_offered       String?
  custom_min_price      String?
  favorite_emojis       String?
  keywords              String?
  limitations           String?
  oftv_channel_interest String?
  tone_language         String?
  video_call_min_price  String?
  client_name           String?
  mm_restrictions       String?
  verbiage_restrictions String?
  wall_restrictions     String?
  calendar_id           String?
  onboardingCompleted   Boolean?             @default(false)
  status                String?
  model_name            String?
  clientCustomSheet     String?
  clientOnlyFansAlbum   String?
  clientSocialAlbums    String?
  launchesPod           String?
  onboardingProgress    OnboardingProgress[]
}

model OnboardingList {
  id          String               @id @default(cuid())
  stepNumber  Int
  title       String
  description String?
  required    Boolean              @default(true)
  createdAt   DateTime             @default(now())
  updatedAt   DateTime             @updatedAt
  progress    OnboardingProgress[]

  @@index([stepNumber])
}

model OnboardingProgress {
  id                   String             @id @default(cuid())
  onboardingListId     String
  clientModelDetailsId String
  completed            Boolean            @default(false)
  completedAt          DateTime?
  notes                String?
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt
  ClientModelDetails   ClientModelDetails @relation(fields: [clientModelDetailsId], references: [id], onDelete: Cascade)
  OnboardingList       OnboardingList     @relation(fields: [onboardingListId], references: [id], onDelete: Cascade)

  @@unique([onboardingListId, clientModelDetailsId])
  @@index([clientModelDetailsId])
  @@index([onboardingListId])
}

model PodTeam {
  id                         String                    @id @default(cuid())
  createdAt                  DateTime                  @default(now())
  createdById                String?
  description                String?
  isActive                   Boolean?                  @default(true)
  name                       String                    @unique
  updatedAt                  DateTime?                 @updatedAt
  projectPrefix              String?                   @unique
  columnNotificationsEnabled Boolean                   @default(true)
  order                      Int?                      @default(0)
  notifications              Notification[]
  createdBy                  User?                     @relation("PodTeamCreator", fields: [createdById], references: [id])
  assignedClients            PodTeamClientAssignment[]
  members                    PodTeamMember[]
  strikes                    Strike[]
  tasks                      Task[]
  resources                  TeamResource[]

  @@index([createdById])
  @@index([isActive])
  @@index([name])
  @@index([projectPrefix])
  @@index([order])
}

model PodTeamMember {
  id        String        @id @default(cuid())
  podTeamId String
  userId    String
  role      PodMemberRole @default(MEMBER)
  joinedAt  DateTime      @default(now())
  podTeam   PodTeam       @relation(fields: [podTeamId], references: [id], onDelete: Cascade)
  user      User          @relation("PodTeamMemberUser", fields: [userId], references: [id], onDelete: Cascade)

  @@unique([podTeamId, userId])
  @@index([podTeamId])
  @@index([userId])
}

model PodTeamClientAssignment {
  id            String      @id @default(cuid())
  podTeamId     String
  clientModelId String
  assignedAt    DateTime    @default(now())
  assignedById  String
  isActive      Boolean     @default(true)
  notes         String?
  assignedBy    User        @relation("PodClientAssignedBy", fields: [assignedById], references: [id])
  clientModel   ClientModel @relation(fields: [clientModelId], references: [id], onDelete: Cascade)
  podTeam       PodTeam     @relation(fields: [podTeamId], references: [id], onDelete: Cascade)

  @@unique([podTeamId, clientModelId])
  @@index([podTeamId])
  @@index([clientModelId])
  @@index([assignedById])
}

model TeamResource {
  id        String   @id @default(cuid())
  podTeamId String
  name      String
  link      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  podTeam   PodTeam  @relation(fields: [podTeamId], references: [id], onDelete: Cascade)

  @@index([podTeamId])
}

model Strike {
  id          String    @id @default(cuid())
  userId      String
  podTeamId   String
  reason      String
  issuedById  String
  isActive    Boolean   @default(true)
  notes       String?
  attachments Json?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  resolvedAt  DateTime?
  issuedBy    User      @relation("StrikeIssuedBy", fields: [issuedById], references: [id])
  podTeam     PodTeam   @relation(fields: [podTeamId], references: [id], onDelete: Cascade)
  user        User      @relation("StrikeUser", fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([podTeamId])
  @@index([issuedById])
  @@index([isActive])
  @@index([createdAt])
  @@index([userId, podTeamId])
}

model BoardColumn {
  id              String                        @id
  teamId          String
  label           String
  status          String
  position        Int
  color           String                        @default("#6B7280")
  isDefault       Boolean                       @default(false)
  isActive        Boolean                       @default(true)
  createdAt       DateTime                      @default(now())
  updatedAt       DateTime                      @updatedAt
  assignedMembers BoardColumnMemberAssignment[]

  @@unique([teamId, position])
  @@unique([teamId, status])
  @@index([position])
  @@index([teamId])
}

model BoardColumnMemberAssignment {
  id           String      @id @default(cuid())
  columnId     String
  userId       String
  assignedAt   DateTime    @default(now())
  assignedById String
  isActive     Boolean     @default(true)
  assignedBy   User        @relation("BoardColumnAssignedBy", fields: [assignedById], references: [id])
  column       BoardColumn @relation(fields: [columnId], references: [id], onDelete: Cascade)
  user         User        @relation("BoardColumnAssignedUser", fields: [userId], references: [id])

  @@unique([columnId, userId])
  @@index([columnId])
  @@index([userId])
  @@index([assignedById])
}

model ContentSubmission {
  id                    String             @id
  submissionType        SubmissionType
  modelName             String
  priority              SubmissionPriority
  driveLink             String
  contentDescription    String
  screenshotAttachments Json?
  status                SubmissionStatus   @default(PENDING)
  createdById           String
  createdAt             DateTime           @default(now())
  updatedAt             DateTime           @updatedAt
  processedAt           DateTime?
  notes                 String?
  minimumPrice          String?
  releaseDate           String?
  releaseTime           String?
  timezone              String?
  User                  User               @relation(fields: [createdById], references: [id])
  notifications         Notification[]
  Task                  Task?

  @@index([createdAt])
  @@index([createdById])
  @@index([modelName])
  @@index([priority])
  @@index([status])
  @@index([submissionType])
}

model ModularWorkflow {
  id                   String             @id @default(cuid())
  submissionType       SubmissionType
  contentStyle         ContentStyle
  selectedComponents   Json
  componentData        Json?
  workflowTemplate     String?
  modelName            String
  priority             SubmissionPriority
  driveLink            String
  attachments          Json?
  estimatedDuration    Int?
  teamAssignments      Json?
  createdById          String
  teamId               String?
  taskId               String?            @unique
  status               WorkflowStatus     @default(PENDING)
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt
  processedAt          DateTime?
  timezone             String?
  basePriceDescription String?
  contentCount         String?            @db.VarChar(50)
  contentLength        String?            @db.VarChar(20)
  contentType          ContentType?
  externalCreatorTags  String?            @db.VarChar(500)
  internalModelTags    String[]
  pricing              String?            @db.VarChar(100)
  referenceAttachments Json?
  releaseDate          String?            @db.VarChar(20)
  releaseTime          String?            @db.VarChar(10)
  gifUrl               String?            @db.VarChar(500)
  notes                String?
  contentDescription   String?
  caption              String?
  isFinal              Boolean?           @default(false)
  contentTags          String[]
  contentTypeOptionId  String?
  pricingCategory      String?
  contentTypeOption    ContentTypeOption? @relation("WorkflowContentType", fields: [contentTypeOptionId], references: [id])
  createdBy            User               @relation("ModularWorkflowCreator", fields: [createdById], references: [id])
  task                 Task?              @relation("ModularWorkflowTask", fields: [taskId], references: [id])
  notifications        Notification[]

  @@index([createdAt])
  @@index([createdById])
  @@index([modelName])
  @@index([contentType])
  @@index([contentTypeOptionId])
  @@index([pricingCategory])
  @@index([priority])
  @@index([status])
  @@index([submissionType])
  @@index([contentStyle])
  @@index([teamId])
}

model Attachment {
  id       String         @id
  postId   String
  url      String
  filename String
  type     AttachmentType
  size     Int
  Post     Post           @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
}

model ForumCategory {
  id        String           @id
  modelId   String
  key       ForumCategoryKey @default(GENERAL)
  name      String
  createdAt DateTime         @default(now())
  updatedAt DateTime
  Thread    Thread[]

  @@unique([modelId, key])
  @@index([modelId])
}

model ModerationLog {
  id         String           @id
  actorId    String
  targetType ModerationTarget
  targetId   String
  action     ModerationAction
  reason     String?
  createdAt  DateTime         @default(now())
  User       User             @relation(fields: [actorId], references: [id])

  @@index([actorId])
  @@index([createdAt])
  @@index([targetType, targetId])
}

model Post {
  id            String         @id
  threadId      String
  authorId      String
  content_md    String
  content_html  String
  parentPostId  String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime
  editedAt      DateTime?
  Attachment    Attachment[]
  forumComments ForumComment[]
  forumVotes    ForumVote[]
  User          User           @relation(fields: [authorId], references: [id], onDelete: Cascade)
  Post          Post?          @relation("PostToPost", fields: [parentPostId], references: [id])
  other_Post    Post[]         @relation("PostToPost")
  Thread        Thread         @relation(fields: [threadId], references: [id], onDelete: Cascade)
  PostReaction  PostReaction[]

  @@index([authorId])
  @@index([createdAt])
  @@index([parentPostId])
  @@index([threadId])
}

model PostReaction {
  id     String @id
  postId String
  userId String
  emoji  String
  Post   Post   @relation(fields: [postId], references: [id], onDelete: Cascade)
  User   User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([postId, userId, emoji])
  @@index([postId])
  @@index([userId])
}

model Thread {
  id              String           @id
  modelId         String
  categoryId      String
  title           String
  authorId        String
  pinned          Boolean          @default(false)
  locked          Boolean          @default(false)
  solved          Boolean          @default(false)
  views           Int              @default(0)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime
  forumThreadTags ForumThreadTag[]
  Post            Post[]
  User            User             @relation(fields: [authorId], references: [id], onDelete: Cascade)
  ForumCategory   ForumCategory    @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  ThreadWatcher   ThreadWatcher[]

  @@index([authorId])
  @@index([createdAt])
  @@index([modelId, categoryId])
  @@index([pinned])
  @@index([updatedAt])
}

model ThreadWatcher {
  id       String @id
  userId   String
  threadId String
  Thread   Thread @relation(fields: [threadId], references: [id], onDelete: Cascade)
  User     User   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, threadId])
  @@index([threadId])
  @@index([userId])
}

model Notification {
  id                  String             @id @default(cuid())
  userId              String
  type                NotificationType
  title               String
  message             String
  isRead              Boolean            @default(false)
  createdAt           DateTime           @default(now())
  readAt              DateTime?
  data                Json?
  taskId              String?
  podTeamId           String?
  contentSubmissionId String?
  clientModelId       String?
  modularWorkflowId   String?
  clientModel         ClientModel?       @relation(fields: [clientModelId], references: [id], onDelete: Cascade)
  contentSubmission   ContentSubmission? @relation(fields: [contentSubmissionId], references: [id], onDelete: Cascade)
  ModularWorkflow     ModularWorkflow?   @relation(fields: [modularWorkflowId], references: [id], onDelete: Cascade)
  podTeam             PodTeam?           @relation(fields: [podTeamId], references: [id], onDelete: Cascade)
  task                Task?              @relation(fields: [taskId], references: [id], onDelete: Cascade)
  user                User               @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([type])
  @@index([isRead])
  @@index([createdAt])
  @@index([taskId])
  @@index([podTeamId])
  @@index([contentSubmissionId])
  @@index([clientModelId])
  @@index([modularWorkflowId])
}

model ForumComment {
  id        String   @id @default(cuid())
  postId    String
  authorId  String
  content   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  author    User     @relation(fields: [authorId], references: [id])
  post      Post     @relation(fields: [postId], references: [id], onDelete: Cascade)

  @@index([postId])
  @@index([authorId])
}

model ForumVote {
  id        String        @id @default(cuid())
  postId    String
  userId    String
  voteType  ForumVoteType
  createdAt DateTime      @default(now())
  post      Post          @relation(fields: [postId], references: [id], onDelete: Cascade)
  user      User          @relation(fields: [userId], references: [id])

  @@unique([postId, userId])
  @@index([postId])
  @@index([userId])
}

model ForumTag {
  id        String           @id @default(cuid())
  modelId   String
  name      String
  slug      String
  color     String?
  createdAt DateTime         @default(now())
  threads   ForumThreadTag[]

  @@unique([modelId, slug])
  @@index([modelId])
  @@index([slug])
}

model ForumThreadTag {
  id        String   @id @default(cuid())
  threadId  String
  tagId     String
  createdAt DateTime @default(now())
  tag       ForumTag @relation(fields: [tagId], references: [id], onDelete: Cascade)
  thread    Thread   @relation(fields: [threadId], references: [id], onDelete: Cascade)

  @@unique([threadId, tagId])
  @@index([threadId])
  @@index([tagId])
}

model ForumStats {
  id           String   @id @default(cuid())
  modelId      String
  totalThreads Int      @default(0)
  totalPosts   Int      @default(0)
  totalUsers   Int      @default(0)
  activeUsers  Int      @default(0)
  date         DateTime @default(now())

  @@unique([modelId, date])
  @@index([modelId])
  @@index([date])
}

model ForumAnalytics {
  id      String   @id @default(cuid())
  modelId String
  metric  String
  value   Float
  date    DateTime @default(now())

  @@index([modelId])
  @@index([metric])
  @@index([date])
}

model UserActivityHistory {
  id           String           @id @default(cuid())
  actorId      String
  targetUserId String
  actionType   UserActivityType
  oldRole      Role?
  newRole      Role
  reason       String?
  ipAddress    String?
  userAgent    String?
  createdAt    DateTime         @default(now())
  actor        User             @relation("UserActivityActor", fields: [actorId], references: [id], onDelete: Cascade)
  targetUser   User             @relation("UserActivityTarget", fields: [targetUserId], references: [id], onDelete: Cascade)

  @@index([actorId])
  @@index([targetUserId])
  @@index([createdAt])
  @@index([actionType])
  @@index([oldRole])
  @@index([newRole])
}

model ChatbotConversation {
  id        String   @id @default(cuid())
  userId    String
  sessionId String
  messages  Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([sessionId])
  @@index([createdAt])
}

model InstagramPost {
  id            String              @id @default(cuid())
  userId        String
  imageUrl      String
  caption       String?
  scheduledDate DateTime?
  status        InstagramPostStatus @default(DRAFT)
  postType      InstagramPostType   @default(FEED)
  folder        String?
  position      Int?
  createdAt     DateTime            @default(now())
  updatedAt     DateTime            @updatedAt
  user          User                @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([status])
  @@index([scheduledDate])
  @@index([createdAt])
  @@index([position])
}

model GalleryMasterList {
  id              Int       @id(map: "gallerymasterlist_pkey") @default(autoincrement())
  schedule_tab    String?
  page            String?
  type            String?
  scheduled_date  String?
  time_pst        String?
  message_type    String?
  content_preview String?
  paywall_content String?
  content_style   String?
  caption         String?
  caption_style   String?
  price           String?
  outcome         String?
  notes           String?
  created_at      DateTime? @default(now()) @db.Timestamp(6)
  drive_link      String?
  data_source     String?   @default("SHEET")
  source_task_id  String?

  @@map("GalleryMasterList")
}

model GalleryFavorite {
  id         Int      @id @default(autoincrement())
  user_id    String
  item_id    String
  created_at DateTime @default(now())

  @@unique([user_id, item_id])
  @@index([item_id])
  @@index([user_id])
}

model GalleryRelease {
  id         Int      @id @default(autoincrement())
  item_id    String   @unique
  created_at DateTime @default(now())

  @@index([item_id])
}

model OFTVGallery {
  id                  String                      @id @default(cuid())
  clientModelId       String                      @unique
  parentFolderLink    String?
  publishedFolderLink String?
  createdAt           DateTime                    @default(now())
  updatedAt           DateTime                    @updatedAt
  clientModel         ClientModel                 @relation(fields: [clientModelId], references: [id], onDelete: Cascade)
  folderFavorites     OFTVGalleryFolderFavorite[]
  items               OFTVGalleryItem[]

  @@index([clientModelId])
  @@map("OFTVGallery")
}

model OFTVGalleryItem {
  id              String        @id @default(cuid())
  fileName        String
  fileType        OFTVFileType?
  fileUrl         String
  thumbnailUrl    String?
  mimeType        String?
  position        Int?          @default(0)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  folderName      String?
  galleryId       String
  folderDriveLink String?
  durationMillis  String?
  fileSize        String?
  height          String?
  width           String?
  gallery         OFTVGallery   @relation(fields: [galleryId], references: [id], onDelete: Cascade)

  @@index([galleryId])
  @@index([fileType])
  @@index([position])
  @@map("OFTVGalleryItem")
}

model OFTVGalleryFolderFavorite {
  id         String      @id @default(cuid())
  userId     String
  galleryId  String
  folderName String
  createdAt  DateTime    @default(now())
  gallery    OFTVGallery @relation(fields: [galleryId], references: [id], onDelete: Cascade)
  user       User        @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, galleryId, folderName])
  @@index([userId])
  @@index([galleryId])
  @@index([folderName])
  @@map("OFTVGalleryFolderFavorite")
}

model LiveFlyerGallery {
  id                   String      @id @default(cuid())
  date                 DateTime
  clientModelId        String
  finalOutput          String
  psdFile              String?
  createdById          String
  requestId            String      @unique
  createdAt            DateTime    @default(now())
  updatedAt            DateTime    @updatedAt
  finalOutputThumbnail String
  fileName             String?
  template             String?
  clientModel          ClientModel @relation(fields: [clientModelId], references: [id], onDelete: Cascade)
  createdBy            User        @relation(fields: [createdById], references: [id], onDelete: Cascade)

  @@index([clientModelId])
  @@index([createdById])
  @@map("LiveFlyerGallery")
}

model DailyActivityStat {
  id          String   @id @default(cuid())
  date        DateTime @unique @db.Date
  activeUsers Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([date])
  @@map("DailyActivityStats")
}

model ContentEvent {
  id              String       @id
  title           String
  description     String?
  date            DateTime
  time            String?
  type            EventType
  status          EventStatus? @default(IN_QUEUE)
  color           EventColor   @default(PINK)
  creatorId       String?
  createdById     String
  tags            String[]     @default([])
  price           Float?
  contentLink     String?
  editedVideoLink String?
  flyerLink       String?
  liveType        String?
  attachments     Json?
  notes           String?
  createdAt       DateTime     @default(now())
  updatedAt       DateTime
  completedAt     DateTime?
  cancelledAt     DateTime?
  taskId          String?      @unique
  deletedAt       DateTime?
  User            User         @relation(fields: [createdById], references: [id])
  ClientModel     ClientModel? @relation(fields: [creatorId], references: [id])
  Task            Task?        @relation(fields: [taskId], references: [id])

  @@index([createdAt])
  @@index([createdById])
  @@index([creatorId])
  @@index([date])
  @@index([status])
  @@index([type])
}

model AIGenMonitoring {
  id                   String   @id @default(cuid())
  updatedAt            DateTime @updatedAt
  folderLink           String?
  latestImageThumbnail String?
  latestImageLink      String?
  createdAt            DateTime @default(now())
  createdByEmail       String?
  folderName           String?
  files                Int?

  @@index([folderName])
  @@index([createdByEmail])
}

model ContentTypeOption {
  id             String                      @id @default(cuid())
  value          String
  label          String
  priceType      String?
  priceFixed     Float?
  priceMin       Float?
  priceMax       Float?
  description    String?
  isActive       Boolean                     @default(true)
  order          Int                         @default(0)
  createdAt      DateTime                    @default(now())
  updatedAt      DateTime                    @updatedAt
  category       String
  isFree         Boolean                     @default(false)
  clientModelId  String?
  ClientModel    ClientModel?                @relation(fields: [clientModelId], references: [id], onDelete: Cascade)
  pricingHistory ContentTypePricingHistory[] @relation("ContentTypePricingHistory")
  workflows      ModularWorkflow[]           @relation("WorkflowContentType")

  @@unique([value, category, clientModelId])
  @@index([isActive])
  @@index([order])
  @@index([category])
  @@index([isFree])
  @@index([clientModelId])
}

model ContentTypePricingHistory {
  id                  String            @id @default(cuid())
  contentTypeOptionId String
  changeType          String
  oldPriceType        String?
  oldPriceFixed       Float?
  oldPriceMin         Float?
  oldPriceMax         Float?
  oldLabel            String?
  newPriceType        String?
  newPriceFixed       Float?
  newPriceMin         Float?
  newPriceMax         Float?
  newLabel            String?
  changedById         String?
  reason              String?
  ipAddress           String?
  createdAt           DateTime          @default(now())
  newIsFree           Boolean?
  oldIsFree           Boolean?
  changedBy           User?             @relation("ContentTypePricingHistoryChangedBy", fields: [changedById], references: [id])
  contentTypeOption   ContentTypeOption @relation("ContentTypePricingHistory", fields: [contentTypeOptionId], references: [id], onDelete: Cascade)

  @@index([contentTypeOptionId])
  @@index([createdAt])
  @@index([changeType])
  @@index([changedById])
}

model WallPostSubmission {
  id          String          @id @default(cuid())
  taskId      String          @unique
  modelName   String
  driveLink   String
  podTeamId   String
  createdById String
  status      String          @default("PENDING_REVIEW")
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  processedAt DateTime?
  notes       String?
  photos      WallPostPhoto[]
  task        Task            @relation(fields: [taskId], references: [id], onDelete: Cascade)

  @@index([taskId])
  @@index([podTeamId])
  @@index([createdById])
  @@index([modelName])
  @@index([status])
  @@index([createdAt])
}

model WallPostPhoto {
  id                   String             @id @default(cuid())
  wallPostSubmissionId String
  s3Key                String?
  url                  String?
  caption              String?
  status               String             @default("PENDING_REVIEW")
  position             Int
  createdAt            DateTime           @default(now())
  updatedAt            DateTime           @updatedAt
  postedAt             DateTime?
  publishedToGalleryAt DateTime?
  wallPostSubmission   WallPostSubmission @relation(fields: [wallPostSubmissionId], references: [id], onDelete: Cascade)

  @@index([wallPostSubmissionId])
  @@index([status])
  @@index([position])
  @@index([createdAt])
}

model Feedback {
  id          String           @id @default(cuid())
  category    FeedbackCategory @default(GENERAL)
  title       String?
  message     String
  rating      Int?
  status      FeedbackStatus   @default(NEW)
  priority    FeedbackPriority @default(NORMAL)
  pageUrl     String?
  userAgent   String?
  metadata    Json?
  adminNotes  String?
  resolvedAt  DateTime?
  resolvedBy  String?
  createdAt   DateTime         @default(now())
  updatedAt   DateTime         @updatedAt
  attachments Json?

  @@index([status])
  @@index([category])
  @@index([priority])
  @@index([createdAt])
}

enum Role {
  USER
  ADMIN
  MODERATOR
  GUEST
  SWD
  POD
}

enum VoiceStatus {
  NA
  ACTIVE
  UPLOADING
  PITCHED
  DECLINED
}

enum AccountType {
  GMAIL
  ELEVENLABS
}

enum VoiceModelCategory {
  PROFESSIONAL
  CASUAL
  EXPERIMENTAL
}

enum TaskStatus {
  NOT_STARTED
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum TaskActivityType {
  CREATED
  UPDATED
  STATUS_CHANGED
  PRIORITY_CHANGED
  ASSIGNED
  UNASSIGNED
  DUE_DATE_CHANGED
  ATTACHMENT_ADDED
  ATTACHMENT_REMOVED
  COMMENT_ADDED
  DELETED
}

enum SubmissionPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}

enum SubmissionStatus {
  PENDING
  PROCESSING
  TASK_CREATED
  COMPLETED
  CANCELLED
}

enum SubmissionType {
  OTP
  PTR
}

enum ContentStyle {
  NORMAL
  GAME
  POLL
  LIVESTREAM
  BUNDLE
  PPV
}

enum ContentType {
  BG
  BGG
  GG
  GGG
  ORGY
  SOLO
  COMPILATION
  AHEGAO
  JOI
  THANK_YOU_VIDS
  VIP_GIFTS
  BJ
  FEET
}

model ContentTypeOption {
  id               String            @id @default(cuid())
  value            String
  label            String
  category         String            // "CHEAP_PORN", "EXPENSIVE_PORN", "GF_ACCURATE"
  isFree           Boolean           @default(false) // If true, this content type has no charge
  priceType        String?           // "FIXED", "RANGE", "MINIMUM" (ignored if isFree is true)
  priceFixed       Float?            // For exact prices like $19.99
  priceMin         Float?            // For ranges like $14.99-19.99 or minimum $19.99+
  priceMax         Float?            // For ranges like $14.99-19.99
  description      String?           // Optional description
  isActive         Boolean           @default(true)
  order            Int               @default(0)
  clientModelId    String?           // Foreign key to ClientModel - null means global/default pricing
  clientModel      ClientModel?      @relation("ClientModelContentTypes", fields: [clientModelId], references: [id], onDelete: Cascade)
  createdAt        DateTime          @default(now())
  updatedAt        DateTime          @updatedAt
  workflows        ModularWorkflow[] @relation("WorkflowContentType")
  pricingHistory   ContentTypePricingHistory[] @relation("ContentTypePricingHistory")

  @@unique([value, category, clientModelId])
  @@index([isActive])
  @@index([order])
  @@index([category])
  @@index([isFree])
  @@index([clientModelId])
}

// Content Type Pricing History Audit Log
model ContentTypePricingHistory {
  id                    String            @id @default(cuid())
  contentTypeOptionId   String
  contentTypeOption     ContentTypeOption @relation("ContentTypePricingHistory", fields: [contentTypeOptionId], references: [id], onDelete: Cascade)
  
  // What changed
  changeType            String            // "PRICE_UPDATE", "LABEL_UPDATE", "CREATED", "DEACTIVATED", "REACTIVATED"
  
  // Previous values (null for new records)
  oldIsFree             Boolean?
  oldPriceType          String?
  oldPriceFixed         Float?
  oldPriceMin           Float?
  oldPriceMax           Float?
  oldLabel              String?
  
  // New values
  newIsFree             Boolean?
  newPriceType          String?
  newPriceFixed         Float?
  newPriceMin           Float?
  newPriceMax           Float?
  newLabel              String?
  
  // Audit info - linked to User model
  changedById           String?           // Foreign key to User
  changedBy             User?             @relation("ContentTypePricingHistoryChangedBy", fields: [changedById], references: [id], onDelete: SetNull)
  reason                String?           // Optional reason for change
  ipAddress             String?           // For additional security tracking
  
  createdAt             DateTime          @default(now())

  @@index([contentTypeOptionId])
  @@index([createdAt])
  @@index([changeType])
  @@index([changedById])
}

enum WorkflowStatus {
  PENDING
  PROCESSING
  TASK_CREATED
  COMPLETED
  CANCELLED
}

enum PodMemberRole {
  LEADER
  MEMBER
  ADMIN
}

enum AttachmentType {
  IMAGE
  VIDEO
  DOCUMENT
  OTHER
}

enum ForumCategoryKey {
  GENERAL
  QA
  BUGS
  SHOWCASE
  RELEASES
}

enum ModerationAction {
  PIN
  UNPIN
  LOCK
  UNLOCK
  SOLVE
  UNSOLVE
  DELETE
  RESTORE
  MOVE_CATEGORY
  BAN_USER
  UNBAN_USER
}

enum ModerationTarget {
  THREAD
  POST
  USER
}

enum NotificationType {
  TASK_ASSIGNED
  TASK_STATUS_CHANGED
  TASK_COMMENT_ADDED
  TASK_DUE_DATE_APPROACHING
  POD_TEAM_ADDED
  POD_TEAM_CLIENT_ASSIGNED
  POD_TEAM_MEMBER_JOINED
  CONTENT_SUBMISSION_STATUS_CHANGED
  CLIENT_SHEET_LINK_ADDED
  SYSTEM_NOTIFICATION
  TASK_MENTION
}

enum ForumVoteType {
  UPVOTE
  DOWNVOTE
}

enum UserActivityType {
  ROLE_CHANGED
  ACCOUNT_CREATED
  ACCOUNT_SUSPENDED
  ACCOUNT_REACTIVATED
  ACCOUNT_DELETED
  PASSWORD_RESET
  EMAIL_VERIFIED
}

enum InstagramPostStatus {
  DRAFT
  SCHEDULED
  PUBLISHED
  ARCHIVED
}

enum InstagramPostType {
  FEED
  REEL
  STORY
}

enum OFTVTaskStatus {
  NOT_STARTED
  IN_PROGRESS
  NEEDS_REVISION
  APPROVED
  HOLD
  WAITING_FOR_VO
  SENT
  PUBLISHED
}

enum OFTVFileType {
  VIDEO
  THUMBNAIL
  IMAGE
  GIF
  OTHER
}

enum EventColor {
  PINK
  PURPLE
  BLUE
  GREEN
  ORANGE
}

enum EventStatus {
  IN_QUEUE
  PROCESSING
}

enum EventType {
  PPV
  LIVESTREAM
}

enum WallPostPhotoStatus {
  PENDING_REVIEW
  READY_TO_POST
  POSTED
  REJECTED
}

enum FeedbackCategory {
  BUG
  FEATURE
  IMPROVEMENT
  GENERAL
  QUESTION
  COMPLAINT
  PRAISE
}

enum FeedbackStatus {
  NEW
  REVIEWING
  IN_PROGRESS
  RESOLVED
  CLOSED
  WONT_FIX
}

enum FeedbackPriority {
  LOW
  NORMAL
  HIGH
  URGENT
}
